{"version":3,"sources":["webpack:///src/views/project-startup/test-hardware.vue","webpack:///./src/views/project-startup/test-hardware.vue?5d51","webpack:///./src/views/project-startup/test-hardware.vue"],"names":["test_hardware","uploadFile","setProjectInfo","initSourceData","getWorkerInfo","getProjectId","getUserId","then","data","msg","_this","this","pageSize","currentPage","rows","total","plList","_this2","pmId","isCreateTestEnv","isTestHardware","succMessage","calMessage","plId","creator","resetFields","plName","hwName","brand","model","num","useContent","toString","id","_this3","_this4","workId","reason","val","FileReader","file","fileList","response","name","length","project_startup_test_hardware","render","_vm","_h","$createElement","_c","_self","staticClass","class","active","isActive","on","click","doStartConfirm","_v","directives","rawName","value","expression","$event","openAddAndModifyWindow","doUpload","downloadExcel","staticStyle","width","attrs","workerInfo","row-class-name","rowStyle","prop","label","scopedSlots","_u","key","fn","scope","_s","row","isScope","showCol","doDelete","current-page","page-sizes","page-size","layout","size-change","sizeChange","current-change","currentChange","title","visible","addAndModifyWindow","update:visible","ref","workForm","rules","label-width","placeholder","change","doSelect","callback","$$v","_l","item","$set","min","step","group","slot","type","addOrModify","uploadWindow","action","on-preview","handlePreview","on-remove","handleRemove","on-success","uploadSeccess","before-remove","beforeRemove","before-upload","beforeUpload","upLoadData","multiple","limit","on-exceed","handleExceed","file-list","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.20eef482442311b1aa7c.js","sourcesContent":["<!--\r\n* @author: jinxl\r\n* @date: 2018/1/12\r\n* @module:合同/任务单\r\n-->\r\n<template>\r\n  <div class=\"testAndHardware\">\r\n    <!--接口对应系统-->\r\n    <div class=\"w-table\">\r\n      <div class=\"w-table-btn\">\r\n        <span @click=\"doStartConfirm\" :class=\"{active:isActive}\"><i class=\"iconfont icon-conf-complete\"></i>确认完成</span>\r\n        <span @click=\"openAddAndModifyWindow(0)\"  v-show=\"!isActive\"><i class=\"iconfont icon-new-add\"></i>新增</span>\r\n        <span @click=\"doUpload\" v-show=\"!isActive\"><i class=\"iconfont icon-to-lead\"></i>导入</span>\r\n        <span @click=\"downloadExcel\"><i class=\"iconfont icon-export\"></i>导出</span>\r\n      </div>\r\n      <div class=\"w-table-content\">\r\n        <el-table\r\n          :data=\"workerInfo\"\r\n          style=\"width: 100%\"\r\n          :row-class-name=\"rowStyle\">\r\n          <el-table-column\r\n            prop=\"map.plName\"\r\n            label=\"系统名称\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"hwName\"\r\n            label=\"硬件名称\"\r\n            width=\"200px\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"brand\"\r\n            label=\"最低参数\"\r\n            width=\"300px\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"model\"\r\n            label=\"推荐型号\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"num\"\r\n            label=\"数量\"\r\n            width=\"50px\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"useContent\"\r\n            label=\"用途\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"isScope\"\r\n            label=\"是否本期范围\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.isScope==0?'否':'是'}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"operate\" v-show=\"showCol(scope.row)\">\r\n                <i class=\"iconfont icon-edit\" @click=\"openAddAndModifyWindow(scope.row)\"></i>\r\n                <i class=\"iconfont icon-delete\" @click=\"doDelete(scope.row.id)\" v-show=\"!isActive\"></i>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div class=\"w-table-page\">\r\n        <el-pagination\r\n          @size-change=\"sizeChange\"\r\n          @current-change=\"currentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[10, 20, 30, 40]\"\r\n          :page-size=\"100\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n    <!--新增和编辑接口信息弹窗-->\r\n    <el-dialog :title=\"title\" width=\"30%\" :visible.sync=\"addAndModifyWindow\">\r\n      <el-form :model=\"workForm\" :rules=\"rules\" ref=\"workForm\">\r\n        <el-form-item label=\"系统名称\" label-width=\"80px\" prop=\"plId\">\r\n          <el-select v-model=\"plId\" placeholder=\"请选择\" @change=\"doSelect(plId)\">\r\n            <el-option\r\n              v-for=\"item in plList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"硬件名称\" label-width=\"80px\" prop=\"hwName\">\r\n          <el-input v-model=\"workForm.hwName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"最低参数\" label-width=\"80px\" prop=\"brand\">\r\n          <el-input v-model=\"workForm.brand\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"推荐型号\" label-width=\"80px\" prop=\"model\">\r\n          <el-input v-model=\"workForm.model\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"数量\" label-width=\"80px\" prop=\"num\">\r\n          <el-input-number v-model=\"workForm.num\" :min=\"1\" :step=\"1\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"用途\" label-width=\"80px\" prop=\"useContent\">\r\n          <el-input v-model=\"workForm.useContent\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"本期范围\" label-width=\"80px\">\r\n          <el-select v-model=\"reason\" placeholder=\"请选择\">\r\n            <el-option-group\r\n              v-for=\"group in ranges\"\r\n              :key=\"group.label\"\r\n              :label=\"group.label\">\r\n              <el-option\r\n                v-for=\"item in group.options\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n              </el-option>\r\n            </el-option-group>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addAndModifyWindow = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addOrModify('workForm')\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n\r\n    <!--文件上传弹窗-->\r\n    <el-dialog title=\"文件上传\" width=\"30%\" :visible.sync=\"uploadWindow\">\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        :action=\"action\"\r\n        :on-preview=\"handlePreview\"\r\n        :on-remove=\"handleRemove\"\r\n        :on-success=\"uploadSeccess\"\r\n        :before-remove=\"beforeRemove\"\r\n        :before-upload=\"beforeUpload\"\r\n        :data=\"upLoadData\"\r\n        multiple\r\n        :limit=\"1\"\r\n        :on-exceed=\"handleExceed\"\r\n        :file-list=\"fileList\">\r\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传xls/xlsx文件，且不超过500kb</div>\r\n      </el-upload>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"uploadWindow = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n\r\n  </div>\r\n</template>\r\n<!--JavaScript-->\r\n<script>\r\n  import api from '../../../api/api'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        formOpen: true,\r\n        title: '新增',\r\n        uploadWindow: false,//导入弹窗默认关闭\r\n        workId: 0,\r\n        interfaceInfoData: [],//接口信息\r\n        isActive: false,//确认完成\r\n        addAndModifyWindow: false,//默认影藏新增接口信息弹框\r\n        upLoadData: {//上传文件时传递的参数\r\n          pmId: \"\",//项目id\r\n          operator: \"\"//操作人\r\n        },\r\n        plId: \"\",\r\n        plList: [],//产品条线\r\n        reason: \"\",\r\n        ranges: [{\r\n          label: '否',\r\n          options: [{\r\n            value: '不在合同范围',\r\n            label: '不在合同范围'\r\n          }, {\r\n            value: '本期不实施',\r\n            label: '本期不实施'\r\n          },\r\n            {\r\n              value: '医院暂时不用',\r\n              label: '医院暂时不用'\r\n            },\r\n            {\r\n              value: '其他',\r\n              label: '其他'\r\n            }]\r\n        }, {\r\n          label: '是',\r\n          options: [{\r\n            value: '',\r\n            label: '是'\r\n          }]\r\n        }],\r\n        fileList: [],//上传文件集合\r\n        workForm: {//接口信息表单\r\n          map: [{\"plName\": \"\"}],\r\n          plId: \"\",\r\n          hwName: \"\",\r\n          brand: \"\",\r\n          model: \"\",\r\n          num: 1,\r\n          useContent: \"\",\r\n          isScope: \"1\",\r\n          noScopeCode: \"\"\r\n        },\r\n        rules: {\r\n          plId: {required: true, message: '请选择系统名称', trigger: 'change'},\r\n          hwName: {required: true, message: '请输入硬件名称', trigger: 'blur'},\r\n          brand: {required: true, message: '请输入最低参数', trigger: 'blur'},\r\n          model: {required: true, message: '请输入推荐型号', trigger: 'blur'},\r\n          useContent: {required: true, message: '请输入用途', trigger: 'blur'},\r\n          //isScope: {required: true, message: '请选择本期范围', trigger: 'blur'},\r\n        },\r\n        action: api.url.softHardware.uploadFile,\r\n        workerInfo: [],\r\n        uploadForm: {\r\n          uploadFile: ''\r\n        },\r\n        pageSize: 10,\r\n        total: 100,\r\n        currentPage: 1,\r\n        dialogFormVisible: false,\r\n        formLabelWidth: '120px',\r\n      }\r\n    },\r\n    created() {\r\n      this.$parent.setSelectDisable(true);\r\n      this.$parent.setProjectInfo();\r\n      this.initSourceData();\r\n      this.$nextTick(function () {\r\n        this.getWorkerInfo();\r\n      })\r\n    },\r\n    methods: {\r\n      //初始化接口数据源\r\n      initSourceData() {\r\n        api.post(api.url.softHardware.initSourceData, {\r\n          pmId: this.$parent.getProjectId(),\r\n          operator: this.$parent.getUserId(),\r\n        }).then((data) => {\r\n          console.log(data.msg);\r\n        });\r\n      },\r\n      //获取测试硬件数据\r\n      getWorkerInfo: function () {\r\n        var pmId = this.$parent.getProjectId();\r\n        var pageSize = this.pageSize;\r\n        var currentPage = this.currentPage;\r\n        var first = (currentPage - 1) * pageSize;\r\n        api.post(api.url.softHardware.initData, {'first': first, 'count': pageSize, 'pmId': pmId}).then((data) => {\r\n          if (data.status == 'success') {\r\n            console.info(data);\r\n            console.info(this.$parent.getProjectId());\r\n            this.workerInfo = data.rows;\r\n            this.total = data.total;\r\n            this.plList = data.plList;\r\n            if (data.process.isCreateTestEnv != 1 || data.process.isTestHardware != 1) {\r\n              this.isActive = false;\r\n            } else if (data.process.isCreateTestEnv == 1 && data.process.isTestHardware == 1) {\r\n              this.isActive = true;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      //确认完成\r\n      doStartConfirm: function () {\r\n        let pmId = this.$parent.getProjectId();\r\n        let confirmText = '';\r\n        let succMessage = '';\r\n        let calMessage = '';\r\n        let isCreateTestEnv = 0;\r\n        let isTestHardware = 0;\r\n        if (!this.isActive) {\r\n          confirmText = '此操作将确认硬件清单准备和测试环境搭建, 是否继续?';\r\n          succMessage = '确认成功';\r\n          calMessage = '已取消确认';\r\n          isCreateTestEnv = 1;\r\n          isTestHardware = 1;\r\n        } else {\r\n          confirmText = '此操作将取消确认硬件清单准备和测试环境搭建, 是否继续?';\r\n          succMessage = '取消成功';\r\n          calMessage = '已撤销取消';\r\n          isCreateTestEnv = 0;\r\n          isTestHardware = 0;\r\n        }\r\n        this.$confirm(confirmText, '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          api.post(api.url.softHardware.doStartConfirm, {\r\n            pmId: pmId,\r\n            operator: this.$parent.getUserId(),\r\n            isCreateTestEnv: isCreateTestEnv,\r\n            isTestHardware: isTestHardware,\r\n          }).then((data) => {\r\n            if (data.status == \"success\") {\r\n              this.$message({type: 'success', message: succMessage});\r\n              if (!this.isActive) {\r\n                this.isActive = true;\r\n              } else {\r\n                this.isActive = false;\r\n              }\r\n            }\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: calMessage\r\n          });\r\n        });\r\n      },\r\n      //选择产品分类\r\n      doSelect(plId) {\r\n        this.workForm.plId = plId;\r\n        this.plId = plId;\r\n      },\r\n      //是否可操作\r\n      showCol: function (data) {\r\n        console.info(data.creator);\r\n        if (data.creator != 0) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      //表格行样式回调方法\r\n      rowStyle: function (row, rowIndex) {\r\n        if (row.row.isScope === 1) {\r\n          return 'default-row-class';\r\n        } else {\r\n          return 'invalid-row-class';\r\n        }\r\n      },\r\n      //打开编辑弹出框\r\n      openAddAndModifyWindow: function (data) {\r\n        if (this.$refs['workForm'] !== undefined) {\r\n          this.$refs['workForm'].resetFields();\r\n        }\r\n        console.info(data);\r\n        if (data == 0) {\r\n          this.workForm.map.plName = \"\";\r\n          this.workForm.hwName = \"\";\r\n          this.workForm.brand = \"\";\r\n          this.workForm.model = \"\";\r\n          this.workForm.num = 1;\r\n          this.workForm.useContent = \"\";\r\n          this.workForm.isScope = \"1\";\r\n          this.workForm.noScopeCode = \"\";\r\n          this.plId = \"\";\r\n          this.reason = \"\";\r\n          this.workId = 0;\r\n        } else {\r\n          this.workForm.map.plName = data.map.plName;\r\n          this.workForm.hwName = data.hwName;\r\n          this.workForm.brand = data.brand;\r\n          this.workForm.model = data.model;\r\n          this.workForm.num = data.num;\r\n          this.workForm.useContent = data.useContent;\r\n          this.workForm.isScope = data.isScope.toString();\r\n          this.workForm.noScopeCode = data.noScopeCode.toString();\r\n          this.reason = data.noScopeCode.toString();\r\n          this.workForm.plId = data.plId;\r\n          this.plId = data.plId;\r\n          this.workId = data.id;\r\n        }\r\n        this.addAndModifyWindow = true;\r\n      },\r\n      doDelete: function (id) {\r\n        this.$confirm('删除本条数据?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          api.post(api.url.softHardware.delete, {'id': id}).then((data) => {\r\n            if (data.status == \"success\") {\r\n              this.$message({type: 'success', message: '删除成功!'});\r\n              this.getWorkerInfo();\r\n            }\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        });\r\n\r\n      },\r\n      //新增或编辑弹窗确定\r\n      addOrModify: function (formName) {\r\n        this.interfaceInfoWindow = true;\r\n        var json = {\r\n          id: this.workId,\r\n          pmId: this.$parent.getProjectId(),\r\n          plId: this.plId,\r\n          hwName: this.workForm.hwName,\r\n          brand: this.workForm.brand,\r\n          model: this.workForm.model,\r\n          num: this.workForm.num,\r\n          useContent: this.workForm.useContent,\r\n          noScopeCode: this.reason,\r\n          operator: this.$parent.getUserId()\r\n        };\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            api.post(api.url.softHardware.addOrModify, json).then((data) => {\r\n              if (data.status = 'success') {\r\n                this.getWorkerInfo();\r\n              }\r\n            });\r\n            this.addAndModifyWindow = false;\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      //导出EXCEL\r\n      downloadExcel: function () {\r\n        var pmId = this.$parent.getProjectId();\r\n        window.open(api.url.softHardware.exportExcel + \"?pmId=\" + pmId);\r\n      },\r\n      sizeChange(val) {\r\n        console.log(`每页 ${val} 条`);\r\n        this.pageSize = val;\r\n        this.getWorkerInfo();\r\n      },\r\n      currentChange(val) {\r\n        console.log(`当前页: ${val}`);\r\n        this.currentPage = val;\r\n        this.getWorkerInfo();\r\n      },\r\n      //导入\r\n      doUpload: function () {\r\n        this.upLoadData.pmId = this.$parent.getProjectId();\r\n        this.upLoadData.operator = this.$parent.getUserId();\r\n        this.uploadWindow = true;\r\n      },\r\n      beforeUpload(file) {\r\n        var reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function () {\r\n          // this.upLoadData.id = this.result;\r\n          // console.log(this.action);\r\n          // console.log(this.result);\r\n        };\r\n      },\r\n      handlePreview(file) {\r\n        console.log(file);\r\n      },\r\n      handleRemove(file, fileList) {\r\n        console.log(file, fileList);\r\n      },\r\n      uploadSeccess: function (response) {\r\n        console.log(response);\r\n        if (response.status == 'success') {\r\n          this.fileList = [];\r\n          this.uploadWindow = false;\r\n          this.getWorkerInfo();\r\n        } else {\r\n          this.$message.warning(response.msg);\r\n        }\r\n      },\r\n      beforeRemove(file, fileList) {\r\n        return this.$confirm(`确定移除 ${ file.name }？`);\r\n      },\r\n      handleExceed(files, fileList) {\r\n        this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n      },\r\n    }\r\n  }\r\n\r\n</script>\r\n<!--CSS-PAGE-->\r\n<style lang=\"stylus\" scoped>\r\n  .testAndHardware {\r\n    padding 0px 15px\r\n  }\r\n</style>\r\n\r\n<style lang=\"stylus\">\r\n\r\n  .default-row-class {\r\n    color #777777;\r\n  }\r\n\r\n  .invalid-row-class {\r\n    color #D0D0D0;\r\n  }\r\n\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/project-startup/test-hardware.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"testAndHardware\"},[_c('div',{staticClass:\"w-table\"},[_c('div',{staticClass:\"w-table-btn\"},[_c('span',{class:{active:_vm.isActive},on:{\"click\":_vm.doStartConfirm}},[_c('i',{staticClass:\"iconfont icon-conf-complete\"}),_vm._v(\"确认完成\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isActive),expression:\"!isActive\"}],on:{\"click\":function($event){_vm.openAddAndModifyWindow(0)}}},[_c('i',{staticClass:\"iconfont icon-new-add\"}),_vm._v(\"新增\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isActive),expression:\"!isActive\"}],on:{\"click\":_vm.doUpload}},[_c('i',{staticClass:\"iconfont icon-to-lead\"}),_vm._v(\"导入\")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.downloadExcel}},[_c('i',{staticClass:\"iconfont icon-export\"}),_vm._v(\"导出\")])]),_vm._v(\" \"),_c('div',{staticClass:\"w-table-content\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.workerInfo,\"row-class-name\":_vm.rowStyle}},[_c('el-table-column',{attrs:{\"prop\":\"map.plName\",\"label\":\"系统名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"hwName\",\"label\":\"硬件名称\",\"width\":\"200px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"brand\",\"label\":\"最低参数\",\"width\":\"300px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"model\",\"label\":\"推荐型号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"num\",\"label\":\"数量\",\"width\":\"50px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"useContent\",\"label\":\"用途\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"isScope\",\"label\":\"是否本期范围\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.isScope==0?'否':'是'))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showCol(scope.row)),expression:\"showCol(scope.row)\"}],staticClass:\"operate\"},[_c('i',{staticClass:\"iconfont icon-edit\",on:{\"click\":function($event){_vm.openAddAndModifyWindow(scope.row)}}}),_vm._v(\" \"),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isActive),expression:\"!isActive\"}],staticClass:\"iconfont icon-delete\",on:{\"click\":function($event){_vm.doDelete(scope.row.id)}}})])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"w-table-page\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 30, 40],\"page-size\":100,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.sizeChange,\"current-change\":_vm.currentChange}})],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.title,\"width\":\"30%\",\"visible\":_vm.addAndModifyWindow},on:{\"update:visible\":function($event){_vm.addAndModifyWindow=$event}}},[_c('el-form',{ref:\"workForm\",attrs:{\"model\":_vm.workForm,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"系统名称\",\"label-width\":\"80px\",\"prop\":\"plId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":function($event){_vm.doSelect(_vm.plId)}},model:{value:(_vm.plId),callback:function ($$v) {_vm.plId=$$v},expression:\"plId\"}},_vm._l((_vm.plList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"硬件名称\",\"label-width\":\"80px\",\"prop\":\"hwName\"}},[_c('el-input',{model:{value:(_vm.workForm.hwName),callback:function ($$v) {_vm.$set(_vm.workForm, \"hwName\", $$v)},expression:\"workForm.hwName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"最低参数\",\"label-width\":\"80px\",\"prop\":\"brand\"}},[_c('el-input',{model:{value:(_vm.workForm.brand),callback:function ($$v) {_vm.$set(_vm.workForm, \"brand\", $$v)},expression:\"workForm.brand\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"推荐型号\",\"label-width\":\"80px\",\"prop\":\"model\"}},[_c('el-input',{model:{value:(_vm.workForm.model),callback:function ($$v) {_vm.$set(_vm.workForm, \"model\", $$v)},expression:\"workForm.model\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"数量\",\"label-width\":\"80px\",\"prop\":\"num\"}},[_c('el-input-number',{attrs:{\"min\":1,\"step\":1},model:{value:(_vm.workForm.num),callback:function ($$v) {_vm.$set(_vm.workForm, \"num\", $$v)},expression:\"workForm.num\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用途\",\"label-width\":\"80px\",\"prop\":\"useContent\"}},[_c('el-input',{model:{value:(_vm.workForm.useContent),callback:function ($$v) {_vm.$set(_vm.workForm, \"useContent\", $$v)},expression:\"workForm.useContent\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"本期范围\",\"label-width\":\"80px\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.reason),callback:function ($$v) {_vm.reason=$$v},expression:\"reason\"}},_vm._l((_vm.ranges),function(group){return _c('el-option-group',{key:group.label,attrs:{\"label\":group.label}},_vm._l((group.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))}))],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addAndModifyWindow = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addOrModify('workForm')}}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"文件上传\",\"width\":\"30%\",\"visible\":_vm.uploadWindow},on:{\"update:visible\":function($event){_vm.uploadWindow=$event}}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.action,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.uploadSeccess,\"before-remove\":_vm.beforeRemove,\"before-upload\":_vm.beforeUpload,\"data\":_vm.upLoadData,\"multiple\":\"\",\"limit\":1,\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx文件，且不超过500kb\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.uploadWindow = false}}},[_vm._v(\"取 消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-5c942446\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/project-startup/test-hardware.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c942446\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./test-hardware.vue\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c942446\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=1!./test-hardware.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./test-hardware.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./test-hardware.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c942446\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./test-hardware.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5c942446\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project-startup/test-hardware.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}