webpackJsonp([4],{BwfL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("XLwt"),o=a.n(i),n=a("WhC7"),l={data:function(){return{chart:!1,image:!1,pageSize:10,total:10,currentPage:1,operateRowId:0,imgPaths:[],commondTableData:[{id:12,siteName:"胸外科病区住院护士站",productName:"病区护士站",menuName:"发票打印",questionType:"程序类",questionDesc:"发票走纸不对",create_name:"万科",createTime:"2017/01/02 17:23",dealType:"1",priority:"1",workAssig:"1",completionTime:"2017/01/03 14:20"}],selectData:{dealType:[{value:"1",label:"程序处理"},{value:"2",label:"模板配置"}],priority:[{value:"1",label:"高"},{value:"2",label:"中"}],workAssig:[{value:"1",label:"三毛"},{value:"2",label:"五毛"}]},nameData:[],numData:[]}},created:function(){this.$parent.setSelectDisable(!0),this.$parent.setProjectInfo(),this.initCodes(),this.$nextTick(function(){this.initCenterData()})},methods:{initCodes:function(){var e=this;n.a.post(n.a.url.etCustomerDetail.initCodes,{dictCode:"operType"}).then(function(t){e.selectData.dealType=t.data}),n.a.post(n.a.url.etCustomerDetail.initCodes,{dictCode:"priorityType"}).then(function(t){e.selectData.priority=t.data})},initCenterData:function(){var e=this,t=this.pageSize,a=(this.currentPage-1)*t,i=this.$parent.getCustomerId(),o=this.$parent.getProjectId();n.a.post(n.a.url.siteCenter.initData,{pmId:o,serialNo:i,first:a,count:t}).then(function(t){e.commondTableData=t.rows,e.total=t.total,e.selectData.workAssig=t.data,e.numData=t.numList,e.nameData=t.nameList})},echartChange:function(){var e=this,t=this.$parent.getCustomerId();n.a.post(n.a.url.siteCenter.updateEchart,{serialNo:t}).then(function(t){"success"==t.status&&(e.numData=t.numList,e.nameData=t.nameList)})},showEchart:function(){var e={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.nameData,axisTick:{alignWithLabel:!0},axisLabel:{color:"#666666",fontFamily:"Microsoft YaHei"},axisLine:{show:!1}}],yAxis:[{type:"value",axisLabel:{color:"#93abba"},axisLine:{lineStyle:{color:"#93abba"}}}],series:[{type:"bar",label:{show:!0},data:this.numData,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]},itemStyle:{color:"#4d9eff"}}]};setTimeout(function(t){o.a.init(document.getElementById("main")).setOption(e)},0)},showInfo:function(e){this.operateRowId=e.id},operTypeChange:function(e){var t=this.operateRowId,a=this.$parent.getUserId();n.a.post(n.a.url.siteCenter.updateOperType,{id:t,operator:a,operType:e}).then(function(e){"success"==e.status&&console.log("变更成功")})},priorityTypeChange:function(e){var t=this.operateRowId,a=this.$parent.getUserId();n.a.post(n.a.url.siteCenter.updatePriorityType,{id:t,operator:a,priority:e}).then(function(e){"success"==e.status&&console.log("变更成功")})},allocateUserChange:function(e){var t=this,a=this.operateRowId,i=this.$parent.getUserId();n.a.post(n.a.url.siteCenter.updateAllocateUser,{id:a,operator:i,allocateUser:e}).then(function(e){"success"==e.status&&(console.log("变更成功"),t.echartChange())})},showImageInfo:function(e){if(console.log(e),console.log(""==e),""!=e){var t=e.split(";");if(this.imgPaths=[],t.length>0){for(var a=0;a<t.length;a++)this.imgPaths[a]=n.a.url.siteCenter.imagePath+t[a];this.image=!0}else this.$alert("当前问题没有上传图片!","提示",{confirmButtonText:"确认",type:"info"})}else this.$alert("当前问题没有上传图片!","提示",{confirmButtonText:"确认",type:"info"})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commond"},[a("div",{staticClass:"w-table"},[a("div",{staticClass:"w-table-btn"},[a("span",{on:{click:function(t){e.chart=!0}}},[a("i",{staticClass:"iconfont icon-job-weight"}),e._v("工作比重")])]),e._v(" "),a("div",{staticClass:"w-table-content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.commondTableData},on:{"cell-mouse-enter":e.showInfo}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"siteName",label:"站点名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"系统"}}),e._v(" "),a("el-table-column",{attrs:{prop:"menuName",label:"菜单"}}),e._v(" "),a("el-table-column",{attrs:{prop:"map.dict_label",label:"问题类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"questionDesc",label:"问题描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"map.create_name",label:"登记人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"map.createTimeString",label:"登记时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"处理方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.operTypeChange},model:{value:t.row.operType,callback:function(a){e.$set(t.row,"operType",a)},expression:"scope.row.operType"}},e._l(e.selectData.dealType,function(e){return a("el-option",{key:e.dictSort,attrs:{label:e.dictLabel,value:e.dictV}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"优先级"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.priorityTypeChange},model:{value:t.row.priority,callback:function(a){e.$set(t.row,"priority",a)},expression:"scope.row.priority"}},e._l(e.selectData.priority,function(e){return a("el-option",{key:e.dictSort,attrs:{label:e.dictLabel,value:e.dictV}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"工作分配"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:e.allocateUserChange},model:{value:t.row.allocateUser,callback:function(a){e.$set(t.row,"allocateUser",a)},expression:"scope.row.allocateUser"}},e._l(e.selectData.workAssig,function(e){return a("el-option",{key:e.id,attrs:{label:e.cName,value:e.userId}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"map.operatorTimeString",align:"center",label:"完成时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operate"},[a("i",{staticClass:"iconfont icon-to-lead"}),e._v(" "),a("i",{staticClass:"iconfont icon-screenshot",on:{click:function(a){e.showImageInfo(t.row.imgPath)}}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"w-table-page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"实施人员工作比重",width:"50%",visible:e.chart},on:{open:e.showEchart,"update:visible":function(t){e.chart=t}}},[a("div",{attrs:{id:"main"}})]),e._v(" "),a("el-dialog",{staticClass:"commond-img",attrs:{width:"50%",visible:e.image},on:{"update:visible":function(t){e.image=t}}},[a("el-carousel",{staticClass:"slideImge"},e._l(e.imgPaths,function(e,t){return a("el-carousel-item",{key:t},[a("img",{attrs:{src:e}})])}))],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,s,!1,function(e){a("xeAR"),a("a4gw")},"data-v-3228ec41",null);t.default=r.exports},a4gw:function(e,t){},xeAR:function(e,t){}});
//# sourceMappingURL=4.3dced4efb3574b728696.js.map