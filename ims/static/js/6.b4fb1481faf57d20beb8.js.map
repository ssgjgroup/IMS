{"version":3,"sources":["webpack:///src/views/implement-work/base-data-check.vue","webpack:///./src/views/implement-work/base-data-check.vue?f6ea","webpack:///./src/views/implement-work/base-data-check.vue"],"names":["base_data_check","setProjectInfo","getWorkerInfo","_this","this","pageSize","currentPage","getProjectId","proStr","first","then","data","rows","total","val","_this2","dataType","id","FileReader","file","fileList","response","msg","name","length","_this3","type","message","implement_work_base_data_check","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","doConfirm","_v","staticStyle","width","attrs","checkTableData","prop","label","align","scopedSlots","_u","key","fn","scope","class","row","map","state","_s","checkResult","$event","getDetail","doUpload","exportSql","title","visible","look","update:visible","gridData","height","property","show-overflow-tooltip","uploadWindow","action","on-preview","handlePreview","on-remove","handleRemove","on-success","uploadSeccess","before-remove","beforeRemove","before-upload","beforeUpload","upLoadData","multiple","limit","on-exceed","handleExceed","file-list","size","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.b4fb1481faf57d20beb8.js","sourcesContent":["<!--\n* @author: jinxl\n* @date: 2018/3/14 0014\n* @module:基础数据校验\n-->\n<template>\n  <div class=\"base-data-check\">\n    <div class=\"w-table\">\n      <div class=\"w-table-btn\">\n        <span class=\"active\" @click=\"doConfirm\"><i class=\"iconfont icon-conf-complete\"></i>确认完成</span>\n        <!--<span @click=\"downloadExcel\"><i class=\"iconfont icon-export\"></i>导出</span>-->\n      </div>\n      <div class=\"w-table-content\">\n        <el-table\n          :data=\"checkTableData\"\n          style=\"width: 100%\">\n          <el-table-column\n            prop=\"map.type\"\n            label=\"分类\"\n            align=\"center\">\n          </el-table-column>\n          <el-table-column\n            prop=\"map.subSystem\"\n            label=\"子系统\">\n          </el-table-column>\n          <el-table-column\n            prop=\"checkResult\"\n            label=\"校验结果\">\n            <template slot-scope=\"scope\">\n              <span :class=\"scope.row.map.state ? 'dangerous':'noraml'\">{{ scope.row.checkResult }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column\n            label=\"操作\">\n            <template slot-scope=\"scope\">\n              <div class=\"operate\">\n                <i class=\"iconfont icon-look-over\" @click=\"getDetail(scope.row.id)\"></i>\n                <i class=\"iconfont icon-conf-complete\" @click=\"doUpload(scope.row.id)\"></i>\n                <i class=\"iconfont icon-export\" @click=\"exportSql(scope.row.id)\"></i>\n              </div>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n    </div>\n\n    <!--数据校验-查看-弹窗-->\n    <el-dialog title=\"新增\"\n               width=\"60%\"\n               :visible.sync=\"look\">\n      <el-table :data=\"gridData\"\n                height=\"250\">\n        <el-table-column property=\"question\" show-overflow-tooltip=\"true\" label=\"问题描述\"></el-table-column>\n        <el-table-column property=\"everyTime\" show-overflow-tooltip=\"true\" label=\"每次用量\"></el-table-column>\n      </el-table>\n    </el-dialog>\n\n    <!--文件上传弹窗-->\n    <el-dialog title=\"文件上传\" width=\"30%\" :visible.sync=\"uploadWindow\">\n      <el-upload\n        class=\"upload-demo\"\n        :action=\"action\"\n        :on-preview=\"handlePreview\"\n        :on-remove=\"handleRemove\"\n        :on-success=\"uploadSeccess\"\n        :before-remove=\"beforeRemove\"\n        :before-upload=\"beforeUpload\"\n        :data=\"upLoadData\"\n        multiple\n        :limit=\"1\"\n        :on-exceed=\"handleExceed\"\n        :file-list=\"fileList\">\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传xls/xlsx文件，且不超过500kb</div>\n      </el-upload>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"uploadWindow = false\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n<!--JavaScript-->\n<script>\n  import api from '../../../api/api'\n\n  export default {\n    //数据\n    data() {\n      return {\n        proStr: \"\",//项目id\n        activeName: 'first',\n        uploadWindow: false,//导入弹窗默影藏\n        upLoadData: {//上传文件时传递的参数\n          id: \"\"\n        },\n        action: api.url.dataCheck.uploadFile,//上传地址\n        pageSize: 10,\n        total: 100,\n        currentPage: 1,\n        look: false,\n        fileList: [],//上传文件参数\n        checkTableData: [],\n        gridData: []\n      }\n    },\n    created() {\n      this.$parent.setSelectDisable(true);\n      this.$parent.setProjectInfo();\n      this.$nextTick(function () {\n        this.getWorkerInfo();\n      });\n    },\n    methods: {\n      //加载数据\n      getWorkerInfo: function () {\n        var pageSize = this.pageSize;\n        var currentPage = this.currentPage;\n        var first = (currentPage - 1) * pageSize;\n        //获取项目id\n        this.proStr = this.$parent.getProjectId();\n        console.log(\"projectId:\" + this.proStr);\n        api.post(api.url.dataCheck.initData, {\n          'first': first,\n          'count': pageSize,\n          proStr: this.proStr\n        }).then((data) => {\n          console.log(data);\n          this.checkTableData = data.rows;\n          this.total = data.total;\n        });\n      }, handleSizeChange(val) {\n        console.log(`每页 ${val} 条`);\n        this.pageSize = val;\n        this.getWorkerInfo();\n      },\n      handleCurrentChange(val) {\n        console.log(`当前页: ${val}`);\n        this.currentPage = val;\n        this.getWorkerInfo();\n      },//根据id获取数据信息\n      getDetail: function (data) {\n        this.look = true;\n        this.workId = data;\n        api.post(api.url.dataCheck.detail, {id: data}).then((data) => {\n          console.log(data);\n          this.gridData = data.data;\n        });\n      },\n      //导出excel数据\n      downloadExcel: function () {\n        window.open(api.url.dataCheck.exportExcel + \"?proStr=\" + this.proStr + \"&dataType=\" + this.dataType);\n      },\n      //上传数据\n      doUpload(id) {\n        this.upLoadData.id = id;\n        this.uploadWindow = true;\n      },\n      beforeUpload(file) {\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = function () {\n          // this.upLoadData.id = this.result;\n          // console.log(this.action);\n          // console.log(this.result);\n        };\n      },\n      handlePreview(file) {\n        console.log(file);\n      },\n      handleRemove(file, fileList) {\n        console.log(file, fileList);\n      },\n      uploadSeccess: function (response) {\n        console.log(response);\n        if (response.status == 'success') {\n          this.fileList = [];\n          this.uploadWindow = false;\n          this.getWorkerInfo();\n        } else {\n          this.$message.warning(response.msg);\n        }\n      },\n      beforeRemove(file, fileList) {\n        return this.$confirm(`确定移除 ${ file.name }？`);\n      },\n      handleExceed(files, fileList) {\n        this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n      },\n      //导出sql文件\n      exportSql: function (data) {\n        window.open(api.url.dataCheck.exportSql + \"?id=\" + data);\n      },\n      //确认完成\n      doConfirm: function () {\n        var type = \"\";\n        var message = \"\";\n        this.$confirm('确认完成, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          api.post(api.url.dataCheck.confirm, {\n            proStr: this.proStr\n          }).then((data) => {\n            console.log(data);\n            type = data.type;\n            message = data.msg;\n            this.$message({\n              type: type,\n              message: message\n            });\n          });\n        }).catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"取消确认！\"\n          });\n        });\n      }\n    }\n  }\n</script>\n<!--CSS-PAGE-->\n<style lang=\"stylus\" scoped>\n  .base-data-check {\n    padding-top 15px\n    padding-left 25px\n  }\n\n  .base-data-check span.noraml {\n    color #2fdd2f;\n  }\n\n  .base-data-check span.dangerous {\n    color #ff6464;\n  }\n\n  /*1660*/\n  @media screen and (max-width: 1660px) {\n  }\n\n  /*1366*/\n  @media screen and (max-width: 1366px) {\n  }\n</style>\n<!--CSS-RESET-->\n<style lang=\"stylus\">\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/implement-work/base-data-check.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"base-data-check\"},[_c('div',{staticClass:\"w-table\"},[_c('div',{staticClass:\"w-table-btn\"},[_c('span',{staticClass:\"active\",on:{\"click\":_vm.doConfirm}},[_c('i',{staticClass:\"iconfont icon-conf-complete\"}),_vm._v(\"确认完成\")])]),_vm._v(\" \"),_c('div',{staticClass:\"w-table-content\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.checkTableData}},[_c('el-table-column',{attrs:{\"prop\":\"map.type\",\"label\":\"分类\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"map.subSystem\",\"label\":\"子系统\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"checkResult\",\"label\":\"校验结果\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{class:scope.row.map.state ? 'dangerous':'noraml'},[_vm._v(_vm._s(scope.row.checkResult))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operate\"},[_c('i',{staticClass:\"iconfont icon-look-over\",on:{\"click\":function($event){_vm.getDetail(scope.row.id)}}}),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-conf-complete\",on:{\"click\":function($event){_vm.doUpload(scope.row.id)}}}),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-export\",on:{\"click\":function($event){_vm.exportSql(scope.row.id)}}})])]}}])})],1)],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"新增\",\"width\":\"60%\",\"visible\":_vm.look},on:{\"update:visible\":function($event){_vm.look=$event}}},[_c('el-table',{attrs:{\"data\":_vm.gridData,\"height\":\"250\"}},[_c('el-table-column',{attrs:{\"property\":\"question\",\"show-overflow-tooltip\":\"true\",\"label\":\"问题描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"everyTime\",\"show-overflow-tooltip\":\"true\",\"label\":\"每次用量\"}})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"文件上传\",\"width\":\"30%\",\"visible\":_vm.uploadWindow},on:{\"update:visible\":function($event){_vm.uploadWindow=$event}}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.action,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.uploadSeccess,\"before-remove\":_vm.beforeRemove,\"before-upload\":_vm.beforeUpload,\"data\":_vm.upLoadData,\"multiple\":\"\",\"limit\":1,\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx文件，且不超过500kb\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.uploadWindow = false}}},[_vm._v(\"取 消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-21b32cdc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/implement-work/base-data-check.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-21b32cdc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./base-data-check.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-21b32cdc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./base-data-check.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./base-data-check.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./base-data-check.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-21b32cdc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./base-data-check.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-21b32cdc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/implement-work/base-data-check.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}