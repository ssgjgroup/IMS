webpackJsonp([3],{cLiI:function(e,o){},fUep:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t("WhC7"),a={data:function(){return{formOpen:!0,title:"新增",uploadWindow:!1,workId:0,interfaceInfoData:[],addAndModifyWindow:!1,upLoadData:{pmId:"",operator:""},fileList:[],workForm:{productName:"",hwName:"",hwBrand:"",hwBrandModel:"",hwNum:1,hwUse:"",isScope:""},rules:{productName:[{required:!0,message:"请输入接口名称",trigger:"blur"}],hwName:[{required:!0,message:"请输入硬件名称",trigger:"blur"}],hwBrand:[{required:!0,message:"请输入推荐品牌",trigger:"blur"}],hwBrandModel:[{required:!0,message:"请输入推荐型号",trigger:"blur"}],hwUse:[{required:!0,message:"请输入用途",trigger:"blur"}],isScope:[{required:!0,message:"请选择本期范围",trigger:"blur"}]},action:r.a.url.devEnvHardware.uploadFile,workerInfo:[],uploadForm:{uploadFile:""},pageSize:10,total:100,currentPage:1,dialogFormVisible:!1,formLabelWidth:"120px"}},created:function(){this.$parent.setSelectDisable(!0),this.$parent.setProjectInfo(),this.$nextTick(function(){this.getWorkerInfo()})},methods:{getWorkerInfo:function(){var e=this,o=this.$parent.getProjectId(),t=this.pageSize,a=(this.currentPage-1)*t;r.a.post(r.a.url.devEnvHardware.initData,{first:a,count:t,pmId:o}).then(function(o){"success"==o.status&&(e.workerInfo=o.rows,e.total=o.total)})},rowStyle:function(e,o){return 1===e.row.isScope?"default-row-class":"invalid-row-class"},openAddAndModifyWindow:function(e){console.info(e),0==e?(this.workForm.productName="",this.workForm.hwName="",this.workForm.hwBrand="",this.workForm.hwBrandModel="",this.workForm.hwNum=1,this.workForm.hwUse="",this.workForm.isScope=""):(this.workForm.productName=e.productName,this.workForm.hwName=e.hwName,this.workForm.hwBrand=e.hwBrand,this.workForm.hwBrandModel=e.hwBrandModel,this.workForm.hwNum=e.hwNum,this.workForm.hwUse=e.hwUse,this.workForm.isScope=e.isScope.toString(),this.workId=e.id),this.addAndModifyWindow=!0},doDelete:function(e){var o=this;this.$confirm("删除本条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.a.post(r.a.url.devEnvHardware.delete,{id:e}).then(function(e){"success"==e.status&&(o.$message({type:"success",message:"删除成功!"}),o.getWorkerInfo())})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},addOrModify:function(e){var o=this;this.interfaceInfoWindow=!0;var t={id:this.workId,pmId:this.$parent.getProjectId(),productName:this.workForm.productName,hwName:this.workForm.hwName,hwBrand:this.workForm.hwBrand,hwBrandModel:this.workForm.hwBrandModel,hwNum:this.workForm.hwNum,hwUse:this.workForm.hwUse,isScope:this.workForm.isScope,operator:this.$parent.getUserId()};this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;r.a.post(r.a.url.devEnvHardware.addOrModify,t).then(function(e){(e.status="success")&&o.getWorkerInfo()}),o.addAndModifyWindow=!1})},downloadExcel:function(){var e=this.$parent.getProjectId();window.open(r.a.url.devEnvHardware.exportExcel+"?pmId="+e)},sizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.getWorkerInfo()},currentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.getWorkerInfo()},doUpload:function(){this.upLoadData.pmId=this.$parent.getProjectId(),this.upLoadData.operator=this.$parent.getUserId(),this.uploadWindow=!0},beforeUpload:function(e){var o=new FileReader;o.readAsDataURL(e),o.onload=function(){}},handlePreview:function(e){console.log(e)},handleRemove:function(e,o){console.log(e,o)},uploadSeccess:function(e){console.log(e),"success"==e.status?(this.fileList=[],this.uploadWindow=!1,this.getWorkerInfo()):this.$message.warning(e.msg)},beforeRemove:function(e,o){return this.$confirm("确定移除 "+e.name+"？")},handleExceed:function(e,o){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+o.length)+" 个文件")}}},i={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"testAndHardware"},[t("div",{staticClass:"project-table"},[t("div",{staticClass:"w-table"},[t("div",{staticClass:"w-table-btn"},[t("span",{on:{click:function(o){e.openAddAndModifyWindow(0)}}},[t("i",{staticClass:"iconfont icon-new-add"}),e._v("新增")]),e._v(" "),t("span",{on:{click:e.doUpload}},[t("i",{staticClass:"iconfont icon-to-lead"}),e._v("导入")]),e._v(" "),t("span",{on:{click:e.downloadExcel}},[t("i",{staticClass:"iconfont icon-export"}),e._v("导出")])]),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.workerInfo,"row-class-name":e.rowStyle}},[t("el-table-column",{attrs:{prop:"productName",label:"系统名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"hwName",label:"硬件名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"hwBrand",label:"推荐品牌"}}),e._v(" "),t("el-table-column",{attrs:{prop:"hwBrandModel",label:"推荐型号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"hwNum",label:"数量"}}),e._v(" "),t("el-table-column",{attrs:{prop:"hwUse",label:"用途"}}),e._v(" "),t("el-table-column",{attrs:{prop:"isScope",label:"是否本期范围"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v(e._s(0==o.row.isScope?"否":"是"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("i",{staticClass:"iconfont icon-edit",on:{click:function(t){e.openAddAndModifyWindow(o.row)}}}),e._v(" "),t("i",{staticClass:"iconfont icon-delete",on:{click:function(t){e.doDelete(o.row.id)}}})]}}])})],1),e._v(" "),t("div",{staticClass:"w-table-page"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.title,width:"30%",visible:e.addAndModifyWindow},on:{"update:visible":function(o){e.addAndModifyWindow=o}}},[t("el-form",{ref:"workForm",attrs:{model:e.workForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"系统名称","label-width":"80px",prop:"productName",required:""}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.workForm.productName,callback:function(o){e.$set(e.workForm,"productName",o)},expression:"workForm.productName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"硬件名称","label-width":"80px",prop:"hwName",required:""}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.workForm.hwName,callback:function(o){e.$set(e.workForm,"hwName",o)},expression:"workForm.hwName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"推荐品牌","label-width":"80px",prop:"hwBrand",required:""}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.workForm.hwBrand,callback:function(o){e.$set(e.workForm,"hwBrand",o)},expression:"workForm.hwBrand"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"推荐型号","label-width":"80px",prop:"hwBrandModel",required:""}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.workForm.hwBrandModel,callback:function(o){e.$set(e.workForm,"hwBrandModel",o)},expression:"workForm.hwBrandModel"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"数量","label-width":"80px",prop:"hwNum",required:""}},[t("el-input-number",{attrs:{min:1,step:1},model:{value:e.workForm.hwNum,callback:function(o){e.$set(e.workForm,"hwNum",o)},expression:"workForm.hwNum"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"用途","label-width":"80px",prop:"hwUse",required:""}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.workForm.hwUse,callback:function(o){e.$set(e.workForm,"hwUse",o)},expression:"workForm.hwUse"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"本期范围","label-width":"80px",prop:"isScope",required:""}},[t("el-radio",{attrs:{label:"1"},model:{value:e.workForm.isScope,callback:function(o){e.$set(e.workForm,"isScope",o)},expression:"workForm.isScope"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:"0"},model:{value:e.workForm.isScope,callback:function(o){e.$set(e.workForm,"isScope",o)},expression:"workForm.isScope"}},[e._v("否")])],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.addAndModifyWindow=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(o){e.addOrModify("workForm")}}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"文件上传",width:"30%",visible:e.uploadWindow},on:{"update:visible":function(o){e.uploadWindow=o}}},[t("el-upload",{staticClass:"upload-demo",attrs:{action:e.action,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.uploadSeccess,"before-remove":e.beforeRemove,"before-upload":e.beforeUpload,data:e.upLoadData,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls/xlsx文件，且不超过500kb")])],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.uploadWindow=!1}}},[e._v("取 消")])],1)],1)],1)])},staticRenderFns:[]};var n=t("VU/8")(a,i,!1,function(e){t("ypsj"),t("cLiI")},"data-v-5b0a4ff4",null);o.default=n.exports},ypsj:function(e,o){}});
//# sourceMappingURL=3.7858a0ce2ada5f7078f5.js.map