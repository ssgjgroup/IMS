{"version":3,"sources":["webpack:///src/views/implement-work/business-process-research.vue","webpack:///./src/views/implement-work/business-process-research.vue?90dc","webpack:///./src/views/implement-work/business-process-research.vue"],"names":["business_process_research","required","message","pattern","upload","setProjectInfo","initCode","initBusinessProcess","checkStep","checkUserAuth","_this","this","data","pageSize","getProjectId","getContractId","getCustomerId","userAuth","isManager","getUserId","_this4","initQueryJson","rows","total","sumNum","comNum","_this5","resetFields","id","flowName","isScope","status","_this6","flowCode","_this7","then","pmId","isFlowAffirm","succMessage","calMessage","_this8","isFlowConfig","downloadPath","_this9","uploadPath","val","msg","fileList","files","length","name","_this10","_this11","operateRowId","changeBusinessCount","row","_this12","operateRow","i","url","warning","implement_work_business_process_research","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","stepState","_v","class","attrs","enterActiveClass","directives","rawName","value","expression","active","align-center","process-status","title","isActive","confirmFlowNum","addProcess","isConfig","confirmFlowConfig","staticStyle","text-align","_s","width","businessProcessData","cell-mouse-enter","getSelectRow","prop","label","align","scopedSlots","_u","key","fn","scope","size","disabled","placeholder","change","changeScope","model","callback","$$v","$set","_l","group","item","hide-on-click","placement","trigger","map","stateClass","stateTxt","slot","type","nativeOn","dropdownClose","modifyStatus","openUploadWindow","downloadPage","showOperation","modifyProcess","current-page","currentPage","page-sizes","page-size","layout","size-change","handleSizeChange","current-change","handleCurrentChange","visible","newAdd","update:visible","ref","flowForm","rules","label-width","addOrModifyProcess","uploadWindow","action","on-preview","handlePreview","on-remove","handleRemove","on-success","uploadSeccess","before-remove","beforeRemove","before-upload","showChange","limit","on-exceed","handleExceed","file-list","color","viewImageWindow","index","src","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.29c50364f690bb501a78.js","sourcesContent":["<!--\r\n* @author: jinxl\r\n* @date: 2018/04/10\r\n* @module:业务流程调研\r\n-->\r\n<template>\r\n  <div class=\"interfa-comb\">\r\n    <div class=\"step\">\r\n      <div class=\"step_title\">\r\n        <span @click=\"stepState = !stepState\">业务流程调研\r\n          <i :class=\"[stepState ? 'open':'','el-icon-arrow-down']\"></i>\r\n        </span>\r\n      </div>\r\n      <transition enterActiveClass=\"animated fadeInUp\">\r\n        <div class=\"step_body\" v-show=\"stepState\">\r\n          <el-steps :active=\"-1\" align-center process-status=\"finish\">\r\n            <el-step title=\"流程数量确认\"></el-step>\r\n            <el-step title=\"问卷下载和作答\"></el-step>\r\n            <el-step title=\"上传问卷\"></el-step>\r\n            <el-step title=\"问卷记录\"></el-step>\r\n            <el-step title=\"审核员审核\"></el-step>\r\n          </el-steps>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n    <div class=\"w-table\">\r\n      <div class=\"w-table-btn\">\r\n        <span @click=\"confirmFlowNum\" :class=\"{ active: isActive }\">\r\n          <i class=\"iconfont icon-conf-complete\"></i>确认完成</span>\r\n        <span @click=\"addProcess\" v-show=\"!isActive\">\r\n          <i class=\"iconfont icon-new-add\"></i>新增</span>\r\n        <span @click=\"confirmFlowConfig\" :class=\"{ active: isConfig }\" v-show=\"isActive\">\r\n          <i class=\"iconfont icon-conf-complete\"></i>提交审核</span>\r\n        <div class=\"w-table-btn_tip\" style=\"text-align: left\">\r\n          <span>流程总数：{{ sumNum }}</span>\r\n          <span>已完成数：{{ comNum }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"w-table-content\">\r\n        <el-table :data=\"businessProcessData\" @cell-mouse-enter=\"getSelectRow\" style=\"width: 100%\">\r\n          <el-table-column prop=\"flowCode\" label=\"流程编号\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"flowName\" label=\"流程名称\">\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" label=\"是否本期范围\">\r\n            <template slot-scope=\"scope\">\r\n              <el-select size=\"mini\" v-model=\"scope.row.isScope\" @change=\"changeScope\" :disabled=\"isActive\" placeholder=\"请选择\">\r\n                <el-option-group v-for=\"group in rangeSelect\" :key=\"group.label\" :label=\"group.label\">\r\n                  <el-option v-for=\"item in group.options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n                  </el-option>\r\n                </el-option-group>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"state\" align=\"center\" label=\"审核状态\" :disabled=\"isActive\">\r\n            <template slot-scope=\"scope\">\r\n              <el-dropdown :hide-on-click=\"false\" placement=\"bottom-start\" trigger=\"click\" v-show=\"!isConfig\">\r\n                <span class=\"el-dropdown-link\">\r\n                  <span :class=\"scope.row.map.stateClass\">\r\n                    {{ scope.row.map.stateTxt }}-{{ scope.row.message }}\r\n                  </span>\r\n                  <i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n                </span>\r\n                <el-dropdown-menu slot=\"dropdown\" style=\"width: 450px;\">\r\n                  <el-dropdown-item>\r\n                    <el-radio-group v-model=\"scope.row.status\" :disabled=\"!isManager\">\r\n                      <el-radio :label=\"1\">提交审核</el-radio>\r\n                      <el-radio :label=\"2\">审核不通过</el-radio>\r\n                      <el-radio :label=\"9\">审核通过</el-radio>\r\n                    </el-radio-group>\r\n                    <el-dropdown-item>\r\n                      <el-input type=\"textarea\" :rows=\"2\" placeholder=\"请输入内容\" v-model=\"scope.row.message\" :disabled=\"!isManager\">\r\n                      </el-input>\r\n                    </el-dropdown-item>\r\n                    <el-dropdown-item>\r\n                      <div style=\"text-align: right;\" v-show=\"isManager\">\r\n                        <el-button @click.native=\"dropdownClose\">取 消</el-button>\r\n                        <el-button @click.native=\"modifyStatus\" type=\"primary\">确 定</el-button>\r\n                      </div>\r\n                    </el-dropdown-item>\r\n                  </el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </el-dropdown>\r\n              <span :class=\"scope.row.map.stateClass\" v-show=\"isConfig\">\r\n                {{ scope.row.map.stateTxt }}-{{ scope.row.message }}\r\n              </span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column align=\"center\" label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"operate\">\r\n                <i @click=\"openUploadWindow(scope.row.id,scope.row.uploadPath)\" class=\"iconfont icon-conf-complete\"></i>\r\n                <i @click=\"downloadPage(scope.row.downloadPath)\" class=\"iconfont icon-download\"></i>\r\n                <i v-show=\"showOperation(scope.row)\" @click=\"modifyProcess(scope.row)\" class=\"iconfont icon-edit\"></i>\r\n                <i @click=\"downloadPage(scope.row.uploadPath)\" class=\"iconfont icon-to-lead\"></i>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div class=\"w-table-page\">\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n\r\n    <!--新增-->\r\n    <el-dialog :title=\"title\" width=\"50%\" :visible.sync=\"newAdd\">\r\n      <el-form :model=\"flowForm\" :rules=\"rules\" ref=\"flowForm\" label-width=\"100px\">\r\n        <el-form-item label=\"流程编号\" prop=\"flowCode\">\r\n          <el-input v-model=\"flowForm.flowCode\" :disabled=\"isActive\">\r\n            <template slot=\"prepend\">WN-YWLC-</template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"流程名称\" prop=\"flowName\">\r\n          <el-input v-model=\"flowForm.flowName\" :disabled=\"isActive\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"本期范围\" prop=\"isScope\">\r\n          <el-select v-model=\"flowForm.isScope\" placeholder=\"请选择\" :disabled=\"isActive\" style=\"width: 100%\">\r\n            <el-option-group v-for=\"group in dialogSelect\" :key=\"group.label\" :label=\"group.label\">\r\n              <el-option v-for=\"item in group.options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n              </el-option>\r\n            </el-option-group>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"newAdd = false\">取 消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"addOrModifyProcess('flowForm')\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!--文件上传弹窗-->\r\n    <el-dialog title=\"文件上传\" width=\"30%\" :visible.sync=\"uploadWindow\">\r\n      <el-upload class=\"upload-demo\" :action=\"action\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" :on-success=\"uploadSeccess\" :before-remove=\"beforeRemove\" :before-upload=\"showChange\" :limit=\"1\" :on-exceed=\"handleExceed\" :file-list=\"fileList\">\r\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传\r\n          <span style=\"color:#F56C6C;\">xls/xlsx/doc/docx文件</span>，文件大小不超过500kb</div>\r\n      </el-upload>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"uploadWindow = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog width=\"50%\" class=\"commond-img\" :visible.sync=\"viewImageWindow\">\r\n      <el-carousel class=\"slideImge\">\r\n        <el-carousel-item v-for=\"(item,index) in viewList\" :key=\"index\">\r\n          <img v-bind:src=\"item\" />\r\n        </el-carousel-item>\r\n      </el-carousel>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<!--JavaScript-->\r\n<script>\r\nimport api from '../../../api/api'\r\n\r\nexport default {\r\n  //数据\r\n  data() {\r\n    return {\r\n      stepState: true,\r\n      sumNum: 10,\r\n      comNum: 5,\r\n      title: '新增',\r\n      isActive: false, //确认数量工作是否完成\r\n      isConfig: false, //提交审核\r\n      isManager: false, //是否项目经理\r\n      isShow: false,\r\n      rangeSelect: [{\r\n        label: '否',\r\n        options: [{\r\n          value: 0,\r\n          label: '本期不实施'\r\n        }, {\r\n          value: 22,\r\n          label: '医院暂时不用'\r\n        }, {\r\n          value: 11,\r\n          label: '其他'\r\n        }]\r\n      }, {\r\n        label: '是',\r\n        options: [{\r\n          value: 1,\r\n          label: '是'\r\n        }]\r\n      }],\r\n      pageSize: 5,\r\n      total: 10,\r\n      currentPage: 1,\r\n      businessProcessData: [\r\n        {\r\n          flowCode: 'WN-YWCL-01-01',\r\n          flowName: '分诊叫号接口',\r\n          isScope: '1',\r\n          stateTxt: '审核不通过',\r\n          map: {\r\n            stateClass: 'disaudit'\r\n          }\r\n        },\r\n        {\r\n          flowCode: 'HIS/心电图',\r\n          flowName: '医技申请、报告',\r\n          isScope: '1',\r\n          stateTxt: '审核通过',\r\n          map: {\r\n            stateClass: 'audited'\r\n          }\r\n        },\r\n        {\r\n          flowCode: 'HIS/心电图',\r\n          flowName: '医技申请、报告',\r\n          isScope: '1',\r\n          stateTxt: '待审核',\r\n          map: {\r\n            stateClass: 'audit'\r\n          }\r\n        }\r\n      ],\r\n      /*弹窗数据*/\r\n      newAdd: false,\r\n      statusData: [],\r\n      flowForm: {\r\n        id: 0,\r\n        flowCode: '',\r\n        flowName: '',\r\n        isScope: 1,\r\n        status: 0,\r\n        message: ''\r\n      },\r\n      rules: {\r\n        flowCode: [\r\n          { required: true, message: '请输入流程编号' },\r\n          { pattern: /^[a-zA-Z0-9_-]+$/, message: '流程编号只能是数字字母和下划线组成' }\r\n        ],\r\n        flowName: { required: true, message: '请输入流程名称' },\r\n        isScope: { required: true, message: '请选择范围', trigger: 'change' }\r\n      },\r\n      dialogSelect: [{\r\n        label: '否',\r\n        options: [{\r\n          value: 0,\r\n          label: '本期不实施'\r\n        }, {\r\n          value: 22,\r\n          label: '医院暂时不用'\r\n        }, {\r\n          value: 11,\r\n          label: '其他'\r\n        }]\r\n      }, {\r\n        label: '是',\r\n        options: [{\r\n          value: 1,\r\n          label: '是'\r\n        }]\r\n      }],\r\n      uploadWindow: false,\r\n      fileList: [],\r\n      action: api.url.businessProcess.upload,\r\n      operateRowId: 0,\r\n      operateRow: {},\r\n      viewList: [],\r\n      viewImageWindow: false,\r\n      uploadFilePath: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.$parent.setSelectDisable(true);\r\n    this.$parent.setProjectInfo();\r\n    this.initCode();\r\n    this.$nextTick(function () {\r\n      this.initBusinessProcess();\r\n      this.checkStep();\r\n      this.checkUserAuth();\r\n    })\r\n  },\r\n  methods: {\r\n    //==================业务流程数量确认===========================//\r\n    initCode() {\r\n      api.post(api.url.etCustomerDetail.initCodes, { 'dictCode': 'audiType' }).then((data) => {\r\n        this.statusData = data.data;\r\n      });\r\n    },\r\n    initQueryJson() { //分页通用查询使用参数\r\n      let pageSize = this.pageSize;\r\n      let first = (this.currentPage - 1) * pageSize;\r\n      let queryJson = {\r\n        'first': first,\r\n        'count': this.pageSize,\r\n        'pmId': this.$parent.getProjectId(),\r\n        'cId': this.$parent.getContractId(),\r\n        'serialNo': this.$parent.getCustomerId()\r\n      };\r\n      return queryJson;\r\n    },\r\n    checkStep() { //检查当前步骤是否完成，修改属性值\r\n      let pmId = this.$parent.getProjectId();\r\n      api.post(api.url.businessProcess.checkAffirm, { 'pmId': pmId }).then((data) => {\r\n        if (data.status === 'success') {\r\n          this.isActive = data.isActive == 0 ? false : true;\r\n          this.isConfig = data.isConfig == 0 ? false : true;\r\n        }\r\n      });\r\n      this.isManager = this.$store.state.userAuth;\r\n      console.log(this.isManager);\r\n    }, checkUserAuth() { ///用户是否是项目经理\r\n      let json = {\r\n        xmlcb: this.$parent.getProjectId(),\r\n        ry: this.$parent.getUserId()\r\n      };\r\n      api.post(api.url.userInfo.authInfo, json).then((data) => {\r\n        if (data.status == 'success') {\r\n          this.isManager = data.data == 0 ? true : false;\r\n        }\r\n      });\r\n    },\r\n    //页面数据初始化\r\n    initBusinessProcess() {\r\n      let queryJson = this.initQueryJson();\r\n      api.post(api.url.businessProcess.initData, queryJson).then((data) => {\r\n        if (data.status == 'success') {\r\n          this.businessProcessData = data.rows;\r\n          this.total = data.total;\r\n          this.sumNum = data.sumNum;\r\n          this.comNum = data.comNum;\r\n        }\r\n      });\r\n    },\r\n    //流程完成总数变化\r\n    changeBusinessCount() {\r\n      let queryJson = this.initQueryJson();\r\n      api.post(api.url.businessProcess.countInfo, queryJson).then((data) => {\r\n        if (data.status == 'success') {\r\n          this.sumNum = data.sumNum;\r\n          this.comNum = data.comNum;\r\n        }\r\n      });\r\n    },\r\n    //添加新的业务流程\r\n    addProcess() {\r\n      if (this.$refs['flowForm'] !== undefined) {\r\n        this.$refs['flowForm'].resetFields();\r\n      }\r\n      this.title = \"新增\";\r\n      this.flowForm.isScope = 1;\r\n      this.newAdd = true;\r\n    },\r\n    //修改业务流程\r\n    modifyProcess(data) {\r\n      if (this.$refs['flowForm'] !== undefined) {\r\n        this.$refs['flowForm'].resetFields();\r\n      }\r\n      this.title = \"修改\";\r\n      this.flowForm.id = data.id;\r\n      this.flowForm.flowCode = data.flowCode.substr(8);\r\n      this.flowForm.flowName = data.flowName;\r\n      this.flowForm.isScope = data.isScope;\r\n      this.flowForm.status = data.status;\r\n      this.flowForm.message = data.message;\r\n      this.newAdd = true;\r\n    },\r\n    //业务流程保存\r\n    addOrModifyProcess(formName) {\r\n      var json = {\r\n        id: this.flowForm.id,\r\n        flowCode: 'WN-YWLC-' + this.flowForm.flowCode,\r\n        flowName: this.flowForm.flowName,\r\n        isScope: this.flowForm.isScope,\r\n        status: this.flowForm.status,\r\n        message: this.flowForm.message,\r\n        operator: this.$parent.getUserId(),\r\n        pmId: this.$parent.getProjectId(),\r\n        cId: this.$parent.getContractId(),\r\n        serialNo: this.$parent.getCustomerId()\r\n      };\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          api.post(api.url.businessProcess.addOrModify, json).then((data) => {\r\n            if (data.status = 'success') {\r\n              this.flowForm.id = 0;\r\n              this.initBusinessProcess();\r\n            }\r\n          });\r\n          this.newAdd = false;\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //确认完成 流程数量确认工作\r\n    confirmFlowNum() {\r\n      let pmId = this.$parent.getProjectId();\r\n      let confirmText = '';\r\n      let succMessage = '';\r\n      let calMessage = '';\r\n      let isFlowAffirm = 0;\r\n      if (!this.isActive) {\r\n        confirmText = '此操作将确认流程调研的范围, 是否继续?';\r\n        succMessage = '确认成功';\r\n        calMessage = '已取消确认';\r\n        isFlowAffirm = 1;\r\n      } else {\r\n        confirmText = '此操作将取消确认流程调研的范围, 是否继续?';\r\n        succMessage = '取消成功';\r\n        calMessage = '已撤销取消';\r\n        isFlowAffirm = 0;\r\n      }\r\n      this.$confirm(confirmText, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        api.post(api.url.businessProcess.confirmFlowNum, {\r\n          'pmId': pmId,\r\n          'isFlowAffirm': isFlowAffirm\r\n        }).then((data) => {\r\n          if (data.status == \"success\") {\r\n            this.$message({ type: 'success', message: succMessage });\r\n            if (!this.isActive) {\r\n              this.isActive = true;\r\n            } else {\r\n              this.isActive = false;\r\n            }\r\n          }\r\n        });\r\n\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: calMessage\r\n        });\r\n      });\r\n    },\r\n    //节点2 流程配置\r\n    confirmFlowConfig() {\r\n      let pmId = this.$parent.getProjectId();\r\n      let confirmText = '';\r\n      let succMessage = '';\r\n      let calMessage = '';\r\n      let isFlowConfig = 0;\r\n      if (!this.isConfig) {\r\n        confirmText = '提交流程配置工作审核, 是否继续?';\r\n        succMessage = '确认成功';\r\n        calMessage = '已取消确认';\r\n        isFlowConfig = 1;\r\n      } else {\r\n        confirmText = '取消提交流程配置工作审核, 是否继续?';\r\n        succMessage = '取消成功';\r\n        calMessage = '已撤销取消';\r\n        isFlowConfig = 0;\r\n      }\r\n      this.$confirm(confirmText, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        api.post(api.url.businessProcess.confirmFlowConfig, {\r\n          'pmId': pmId,\r\n          'isFlowConfig': isFlowConfig\r\n        }).then((data) => {\r\n          if (data.status == \"success\") {\r\n            this.$message({ type: 'success', message: succMessage });\r\n            if (!this.isConfig) {\r\n              this.isConfig = true;\r\n              /*this.isShow = false;*/\r\n            } else {\r\n              this.isConfig = false;\r\n              /* this.isShow = true;*/\r\n            }\r\n          }\r\n        });\r\n\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: calMessage\r\n        });\r\n      });\r\n    },\r\n    downloadPage(downloadPath) {\r\n      if (downloadPath) {\r\n        window.open(api.url.siteCenter.imagePath+downloadPath);\r\n      } else {\r\n        this.$alert('当前文件没有提供下载文件', '下载提示', {\r\n          confirmButtonText: '确定'\r\n        });\r\n      }\r\n    },\r\n    openUploadWindow(id, uploadPath) {\r\n      this.action = api.url.businessProcess.upload + '?id=' + id;\r\n      if (uploadPath && uploadPath !== \"\") {\r\n        this.fileList = [{\r\n          id: id,\r\n          name: uploadPath.substring(uploadPath.lastIndexOf('/') + 1),\r\n          url: api.url.siteCenter.imagePath + uploadPath\r\n        }];\r\n        this.$confirm('当前流程已经上传了文件，再次上传将替换已经上传的文件', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.uploadWindow = true;\r\n        }).catch(() => {\r\n          this.$message({ type: 'info', message: '取消上传' });\r\n        });\r\n      } else {\r\n        this.uploadWindow = true;\r\n      }\r\n    },\r\n    //pageSize改变事件\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.initBusinessProcess();\r\n    },\r\n    //currentPage改变事件\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.initBusinessProcess();\r\n    },\r\n    //上传成功\r\n    uploadSeccess: function (response) {\r\n      if (response.status == 'success') {\r\n        this.fileList = [];\r\n        this.uploadWindow = false;\r\n        this.initBusinessProcess();\r\n      } else {\r\n        this.$message.warning(response.msg);\r\n      }\r\n    },\r\n    //移除上传文件\r\n    handleRemove(file, fileList) {\r\n      //console.log(file, fileList);\r\n    },\r\n    //展示\r\n    handlePreview(file) {\r\n      //console.log(file);\r\n      console.log(file, fileList);\r\n    },\r\n    //限制文件\r\n    handleExceed(files, fileList) {\r\n      console.log(files);\r\n      console.log(fileList);\r\n      this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件,请先删除文件【${\r\n        fileList[0].name\r\n        }】`);\r\n    },\r\n    //移除\r\n    beforeRemove(file, fileList) {\r\n      if (file.id) {\r\n        return this.$confirm(`此操作将永久删除【 ${file.name}】,是否继续？`).then(() => {\r\n          api.post(api.url.businessProcess.deleteFile, {\r\n            'id': file.id,\r\n            operator: this.$parent.getUserId()\r\n          }).then((data) => {\r\n            if (data.status == \"success\") {\r\n              this.initBusinessProcess();\r\n              this.$message({ type: 'success', message: \"文件删除成功\" });\r\n            }\r\n          });\r\n        }).catch(() => {\r\n          this.$message({ type: 'info', message: '取消删除' });\r\n        });\r\n      }\r\n\r\n    },\r\n    //实施范围变更事件\r\n    changeScope(data) {\r\n      let changeJson = {\r\n        id: this.operateRowId,\r\n        isScope: data,\r\n        operator: this.$parent.getUserId()\r\n      };\r\n      api.post(api.url.businessProcess.changeScope, changeJson).then((data) => {\r\n        if (data.status == 'success') {\r\n          this.changeBusinessCount();\r\n        }\r\n      });\r\n    },\r\n    //获取当前行的ID\r\n    getSelectRow: function (row) {\r\n      this.operateRowId = row.id;\r\n      this.operateRow = row;\r\n    },\r\n    //是否显示操作 admin添加的不允许修改\r\n    showOperation: function (data) {\r\n      if (this.isActive) {\r\n        return false;\r\n      }\r\n      if (!data.flowId) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    dropdownClose(e) {\r\n      document.getElementById(e.target.offsetParent.id).style.display = \"none\";\r\n    },\r\n    modifyStatus(e) {\r\n      let data = this.operateRow;\r\n      let json = {\r\n        id: data.id,\r\n        status: data.status,\r\n        message: data.message,\r\n        pmId: this.$parent.getProjectId(),\r\n        cId: this.$parent.getContractId(),\r\n        serialNo: this.$parent.getCustomerId(),\r\n        operator: this.$parent.getUserId()\r\n      };\r\n      api.post(api.url.businessProcess.addOrModify, json).then((data) => {\r\n        if (data.status === 'success') {\r\n          document.getElementById(e.target.offsetParent.id).style.display = \"none\";\r\n          this.initBusinessProcess();\r\n        }\r\n      });\r\n    },\r\n    showImage(uploadPath) {\r\n      this.viewList = [];\r\n      if (uploadPath != '') {\r\n        let path = uploadPath.split(';');\r\n        if (path.length > 0) {\r\n          for (var i = 0; i < path.length; i++) {\r\n            this.viewList[i] = api.url.siteCenter.imagePath + path[i];\r\n          }\r\n          this.viewImageWindow = true;\r\n        }\r\n      } else {\r\n        this.$alert('当前文件没有提供预览文件', '预览提示', {\r\n          confirmButtonText: '确定'\r\n        });\r\n      }\r\n\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    showChange(file) {\r\n      let hz = file.name.substring(file.name.lastIndexOf('.') + 1);\r\n      console.log(hz === 'xls');\r\n      console.log(hz !== 'xls' || hz !== 'xlsx' || hz !== 'doc' || hz !== 'docx');\r\n      if (hz === 'xls' || hz === 'xlsx' || hz === 'doc' || hz === 'docx') {\r\n        return true;\r\n      } else {\r\n        this.$message.warning(`文件格式类型只支持xls,xlsx,doc,docx`);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<!--CSS-PAGE-->\r\n<style lang=\"stylus\" scoped>\r\n.interfa-comb {\r\n  padding: 0px 15px;\r\n}\r\n\r\n.step {\r\n  padding: 20px 15px 20px;\r\n}\r\n\r\n.step_title {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.step_title span {\r\n  color: #666666;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n}\r\n\r\n.step_title span i {\r\n  margin-left: 5px;\r\n  transition: all ease 0.5s;\r\n}\r\n\r\n.step_title span i.open {\r\n  margin-left: 5px;\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.step_body {\r\n  padding: 20px 10px;\r\n  border-radius: 3px;\r\n  border: 1px solid #f8f8f8;\r\n}\r\n\r\n/* 审核状态 */\r\n.audit {\r\n  color: #666666;\r\n}\r\n\r\n.disaudit {\r\n  color: #ff7171;\r\n}\r\n\r\n.audited {\r\n  color: #2fdd2f;\r\n}\r\n\r\n/* 进程状态 */\r\n.rocess-state {\r\n  display: flex;\r\n}\r\n\r\n.rocess-state > div {\r\n  flex-grow: 1;\r\n  line-height: 1;\r\n  color: #e5e5e5;\r\n}\r\n\r\n.rocess-state > div i {\r\n  display: inline-block;\r\n  width: 12px;\r\n  height: 12px;\r\n  margin-bottom: 5px;\r\n  border-radius: 50%;\r\n  border: 1px solid #1e90ff;\r\n}\r\n\r\n.rocess-state > div.state {\r\n  color: #ff4d4d;\r\n}\r\n\r\n.rocess-state > div.state i {\r\n  border: none;\r\n  background: #ff7171;\r\n}\r\n</style>\r\n<!--CSS-RESET-->\r\n<style lang=\"stylus\">\r\n.interfa-comb {\r\n  padding: 0px 15px;\r\n}\r\n\r\n.step {\r\n  padding: 20px 15px 20px;\r\n}\r\n\r\n.step_title {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.step_title span {\r\n  color: #666666;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n}\r\n\r\n.step_title span i {\r\n  margin-left: 5px;\r\n  transition: all ease 0.5s;\r\n}\r\n\r\n.step_title span i.open {\r\n  margin-left: 5px;\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.step_body {\r\n  padding: 20px 10px;\r\n  border-radius: 3px;\r\n  border: 1px solid #f8f8f8;\r\n}\r\n\r\n/* 审核状态 */\r\n.audit {\r\n  color: #666666;\r\n}\r\n\r\n.disaudit {\r\n  color: #ff7171;\r\n}\r\n\r\n.audited {\r\n  color: #2fdd2f;\r\n}\r\n\r\n/* 进程状态 */\r\n.rocess-state {\r\n  display: flex;\r\n}\r\n\r\n.rocess-state > div {\r\n  flex-grow: 1;\r\n  line-height: 1;\r\n  color: #e5e5e5;\r\n}\r\n\r\n.rocess-state > div i {\r\n  display: inline-block;\r\n  width: 12px;\r\n  height: 12px;\r\n  margin-bottom: 5px;\r\n  border-radius: 50%;\r\n  border: 1px solid #1e90ff;\r\n}\r\n\r\n.rocess-state > div.state {\r\n  color: #ff4d4d;\r\n}\r\n\r\n.rocess-state > div.state i {\r\n  border: none;\r\n  background: #ff7171;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/implement-work/business-process-research.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"interfa-comb\"},[_c('div',{staticClass:\"step\"},[_c('div',{staticClass:\"step_title\"},[_c('span',{on:{\"click\":function($event){_vm.stepState = !_vm.stepState}}},[_vm._v(\"业务流程调研\\n        \"),_c('i',{class:[_vm.stepState ? 'open':'','el-icon-arrow-down']})])]),_vm._v(\" \"),_c('transition',{attrs:{\"enterActiveClass\":\"animated fadeInUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.stepState),expression:\"stepState\"}],staticClass:\"step_body\"},[_c('el-steps',{attrs:{\"active\":-1,\"align-center\":\"\",\"process-status\":\"finish\"}},[_c('el-step',{attrs:{\"title\":\"流程数量确认\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"问卷下载和作答\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"上传问卷\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"问卷记录\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"审核员审核\"}})],1)],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"w-table\"},[_c('div',{staticClass:\"w-table-btn\"},[_c('span',{class:{ active: _vm.isActive },on:{\"click\":_vm.confirmFlowNum}},[_c('i',{staticClass:\"iconfont icon-conf-complete\"}),_vm._v(\"确认完成\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isActive),expression:\"!isActive\"}],on:{\"click\":_vm.addProcess}},[_c('i',{staticClass:\"iconfont icon-new-add\"}),_vm._v(\"新增\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isActive),expression:\"isActive\"}],class:{ active: _vm.isConfig },on:{\"click\":_vm.confirmFlowConfig}},[_c('i',{staticClass:\"iconfont icon-conf-complete\"}),_vm._v(\"提交审核\")]),_vm._v(\" \"),_c('div',{staticClass:\"w-table-btn_tip\",staticStyle:{\"text-align\":\"left\"}},[_c('span',[_vm._v(\"流程总数：\"+_vm._s(_vm.sumNum))]),_vm._v(\" \"),_c('span',[_vm._v(\"已完成数：\"+_vm._s(_vm.comNum))])])]),_vm._v(\" \"),_c('div',{staticClass:\"w-table-content\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.businessProcessData},on:{\"cell-mouse-enter\":_vm.getSelectRow}},[_c('el-table-column',{attrs:{\"prop\":\"flowCode\",\"label\":\"流程编号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"flowName\",\"label\":\"流程名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"是否本期范围\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"size\":\"mini\",\"disabled\":_vm.isActive,\"placeholder\":\"请选择\"},on:{\"change\":_vm.changeScope},model:{value:(scope.row.isScope),callback:function ($$v) {_vm.$set(scope.row, \"isScope\", $$v)},expression:\"scope.row.isScope\"}},_vm._l((_vm.rangeSelect),function(group){return _c('el-option-group',{key:group.label,attrs:{\"label\":group.label}},_vm._l((group.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))}))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"state\",\"align\":\"center\",\"label\":\"审核状态\",\"disabled\":_vm.isActive},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dropdown',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isConfig),expression:\"!isConfig\"}],attrs:{\"hide-on-click\":false,\"placement\":\"bottom-start\",\"trigger\":\"click\"}},[_c('span',{staticClass:\"el-dropdown-link\"},[_c('span',{class:scope.row.map.stateClass},[_vm._v(\"\\n                  \"+_vm._s(scope.row.map.stateTxt)+\"-\"+_vm._s(scope.row.message)+\"\\n                \")]),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_vm._v(\" \"),_c('el-dropdown-menu',{staticStyle:{\"width\":\"450px\"},attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',[_c('el-radio-group',{attrs:{\"disabled\":!_vm.isManager},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"提交审核\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"审核不通过\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":9}},[_vm._v(\"审核通过\")])],1),_vm._v(\" \"),_c('el-dropdown-item',[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"请输入内容\",\"disabled\":!_vm.isManager},model:{value:(scope.row.message),callback:function ($$v) {_vm.$set(scope.row, \"message\", $$v)},expression:\"scope.row.message\"}})],1),_vm._v(\" \"),_c('el-dropdown-item',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isManager),expression:\"isManager\"}],staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{nativeOn:{\"click\":function($event){return _vm.dropdownClose($event)}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.modifyStatus($event)}}},[_vm._v(\"确 定\")])],1)])],1)],1)],1),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isConfig),expression:\"isConfig\"}],class:scope.row.map.stateClass},[_vm._v(\"\\n              \"+_vm._s(scope.row.map.stateTxt)+\"-\"+_vm._s(scope.row.message)+\"\\n            \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operate\"},[_c('i',{staticClass:\"iconfont icon-conf-complete\",on:{\"click\":function($event){_vm.openUploadWindow(scope.row.id,scope.row.uploadPath)}}}),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-download\",on:{\"click\":function($event){_vm.downloadPage(scope.row.downloadPath)}}}),_vm._v(\" \"),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showOperation(scope.row)),expression:\"showOperation(scope.row)\"}],staticClass:\"iconfont icon-edit\",on:{\"click\":function($event){_vm.modifyProcess(scope.row)}}}),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-to-lead\",on:{\"click\":function($event){_vm.downloadPage(scope.row.uploadPath)}}})])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"w-table-page\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.title,\"width\":\"50%\",\"visible\":_vm.newAdd},on:{\"update:visible\":function($event){_vm.newAdd=$event}}},[_c('el-form',{ref:\"flowForm\",attrs:{\"model\":_vm.flowForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"流程编号\",\"prop\":\"flowCode\"}},[_c('el-input',{attrs:{\"disabled\":_vm.isActive},model:{value:(_vm.flowForm.flowCode),callback:function ($$v) {_vm.$set(_vm.flowForm, \"flowCode\", $$v)},expression:\"flowForm.flowCode\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"WN-YWLC-\")])],2)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"流程名称\",\"prop\":\"flowName\"}},[_c('el-input',{attrs:{\"disabled\":_vm.isActive},model:{value:(_vm.flowForm.flowName),callback:function ($$v) {_vm.$set(_vm.flowForm, \"flowName\", $$v)},expression:\"flowForm.flowName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"本期范围\",\"prop\":\"isScope\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\",\"disabled\":_vm.isActive},model:{value:(_vm.flowForm.isScope),callback:function ($$v) {_vm.$set(_vm.flowForm, \"isScope\", $$v)},expression:\"flowForm.isScope\"}},_vm._l((_vm.dialogSelect),function(group){return _c('el-option-group',{key:group.label,attrs:{\"label\":group.label}},_vm._l((group.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))}))],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.newAdd = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.addOrModifyProcess('flowForm')}}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"文件上传\",\"width\":\"30%\",\"visible\":_vm.uploadWindow},on:{\"update:visible\":function($event){_vm.uploadWindow=$event}}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.action,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.uploadSeccess,\"before-remove\":_vm.beforeRemove,\"before-upload\":_vm.showChange,\"limit\":1,\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传\\n        \"),_c('span',{staticStyle:{\"color\":\"#F56C6C\"}},[_vm._v(\"xls/xlsx/doc/docx文件\")]),_vm._v(\"，文件大小不超过500kb\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.uploadWindow = false}}},[_vm._v(\"取 消\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"commond-img\",attrs:{\"width\":\"50%\",\"visible\":_vm.viewImageWindow},on:{\"update:visible\":function($event){_vm.viewImageWindow=$event}}},[_c('el-carousel',{staticClass:\"slideImge\"},_vm._l((_vm.viewList),function(item,index){return _c('el-carousel-item',{key:index},[_c('img',{attrs:{\"src\":item}})])}))],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-0fe2949d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/implement-work/business-process-research.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fe2949d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./business-process-research.vue\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0fe2949d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=1!./business-process-research.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./business-process-research.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./business-process-research.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0fe2949d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./business-process-research.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0fe2949d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/implement-work/business-process-research.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}