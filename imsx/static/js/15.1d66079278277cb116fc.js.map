{"version":3,"sources":["webpack:///src/views/implement-work/easy-data-check.vue","webpack:///./src/views/implement-work/easy-data-check.vue?35c8","webpack:///./src/views/implement-work/easy-data-check.vue"],"names":["easy_data_check","setProjectInfo","initSourceData","getWorkerInfo","getProjectId","getUserId","then","data","msg","_this","this","pageSize","currentPage","pmId","first","operator","rows","total","process","val","_this2","id","FileReader","file","fileList","response","name","length","isUse","selectedOptions","multipleSelection","exportModel","idsStr","range","_this3","isEasyDataCheck","succMessage","calMessage","implement_work_easy_data_check","render","_vm","_h","$createElement","_c","_self","staticClass","class","active","isActive","on","click","doConfirm","_v","batchExport","downloadExcel","staticStyle","width","attrs","checkTableData","selection-change","handleSelectionChange","type","prop","label","align","scopedSlots","_u","key","fn","scope","size","placeholder","change","$event","doRangeSelect","row","noScopeCode","model","value","callback","$$v","$set","expression","_l","group","item","map","state","_s","content","exportSql","doUpload","getDetail","current-page","page-sizes","page-size","layout","size-change","handleSizeChange","current-change","handleCurrentChange","title","visible","look","update:visible","gridData","height","property","show-overflow-tooltip","uploadWindow","action","on-preview","handlePreview","on-remove","handleRemove","on-success","uploadSeccess","before-remove","beforeRemove","before-upload","beforeUpload","upLoadData","multiple","limit","on-exceed","handleExceed","file-list","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.1d66079278277cb116fc.js","sourcesContent":["<!--\r\n* @author: jinxl\r\n* @date: 2018/3/14 0014\r\n* @module:基础数据校验\r\n-->\r\n<template>\r\n  <div class=\"easy-data-check\">\r\n    <div class=\"w-table\">\r\n      <div class=\"w-table-btn\">\r\n        <span :class=\"{active:isActive}\" @click=\"doConfirm\"><i class=\"iconfont icon-conf-complete\"></i>确认完成</span>\r\n        <span @click=\"batchExport\"><i class=\"iconfont icon-export\"></i>导出</span>\r\n        <span @click=\"downloadExcel\"><i class=\"iconfont  el-icon-download\"></i>导出模板</span>\r\n      </div>\r\n      <div class=\"w-table-content\">\r\n        <el-table\r\n          :data=\"checkTableData\"\r\n          style=\"width: 100%\"\r\n          @selection-change=\"handleSelectionChange\">\r\n          <el-table-column\r\n            type=\"selection\">\r\n          </el-table-column>\r\n          <!--<el-table-column-->\r\n          <!--prop=\"databaseName\"-->\r\n          <!--label=\"数据库名\"-->\r\n          <!--align=\"center\">-->\r\n          <!--</el-table-column>-->\r\n          <!--<el-table-column-->\r\n          <!--prop=\"tableName\"-->\r\n          <!--label=\"表名\">-->\r\n          <!--</el-table-column>-->\r\n          <!--<el-table-column-->\r\n          <!--prop=\"meaning\"-->\r\n          <!--label=\"含义\">-->\r\n          <!--</el-table-column>-->\r\n          <el-table-column\r\n            prop=\"map.type\"\r\n            label=\"分类\"\r\n            align=\"center\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"isUse\"\r\n            label=\"是否维护\">\r\n            <template slot-scope=\"scope\">\r\n              <el-select size=\"mini\"\r\n                         v-model=\"scope.row.noScopeCode\"\r\n                         placeholder=\"请选择\"\r\n                         @change=\"doRangeSelect(scope.row.noScopeCode,scope.row.id)\">\r\n                <el-option-group\r\n                  v-for=\"group in ranges\"\r\n                  :key=\"group.label\"\r\n                  :label=\"group.label\">\r\n                  <el-option\r\n                    v-for=\"item in group.options\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                  </el-option>\r\n                </el-option-group>\r\n              </el-select>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"content\"\r\n            label=\"完成情况\">\r\n            <template slot-scope=\"scope\">\r\n              <span :class=\"scope.row.map.state ? 'dangerous':'noraml'\">{{ scope.row.content }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"operate\">\r\n                <i class=\"iconfont icon-export\" @click=\"exportSql(scope.row.id)\"></i>\r\n                <i class=\"iconfont icon-conf-complete\" @click=\"doUpload(scope.row.id)\"></i>\r\n                <i class=\"iconfont icon-look-over\" @click=\"getDetail(scope.row.id)\"></i>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div class=\"w-table-page\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[10, 20, 30, 40]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n\r\n    <!--数据校验-查看-弹窗-->\r\n    <el-dialog title=\"未达标的科室或医生如下表\"\r\n               width=\"60%\"\r\n               :visible.sync=\"look\">\r\n      <el-table :data=\"gridData\"\r\n                height=\"300\">\r\n        <el-table-column property=\"deptDoctorCode\" show-overflow-tooltip=\"true\" label=\"科室或医生代码\"></el-table-column>\r\n        <el-table-column property=\"deptDoctorName\" show-overflow-tooltip=\"true\" label=\"科室或医生名称\"></el-table-column>\r\n        <el-table-column property=\"num\" show-overflow-tooltip=\"true\" label=\"数量\"></el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n\r\n    <!--文件上传弹窗-->\r\n    <el-dialog title=\"文件上传\" width=\"30%\" :visible.sync=\"uploadWindow\">\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        :action=\"action\"\r\n        :on-preview=\"handlePreview\"\r\n        :on-remove=\"handleRemove\"\r\n        :on-success=\"uploadSeccess\"\r\n        :before-remove=\"beforeRemove\"\r\n        :before-upload=\"beforeUpload\"\r\n        :data=\"upLoadData\"\r\n        multiple\r\n        :limit=\"1\"\r\n        :on-exceed=\"handleExceed\"\r\n        :file-list=\"fileList\">\r\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传xls/xlsx文件，且不超过500kb</div>\r\n      </el-upload>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"uploadWindow = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n<!--JavaScript-->\r\n<script>\r\n  import api from '../../../api/api'\r\n\r\n  export default {\r\n    //数据\r\n    data() {\r\n      return {\r\n        pmId: \"\",//项目id\r\n        activeName: 'first',\r\n        uploadWindow: false,//导入弹窗默影藏\r\n        isActive: false,\r\n        process: {},\r\n        ranges: [{//下拉选项\r\n          label: '否',\r\n          options: [{\r\n            value: '不在合同范围',\r\n            label: '不在合同范围'\r\n          }, {\r\n            value: '本期不实施',\r\n            label: '本期不实施'\r\n          },\r\n            {\r\n              value: '医院暂时不用',\r\n              label: '医院暂时不用'\r\n            },\r\n            {\r\n              value: '其他',\r\n              label: '其他'\r\n            }]\r\n        }, {\r\n          label: '是',\r\n          options: [{\r\n            value: '',\r\n            label: '是'\r\n          }]\r\n        }],\r\n        selectedOptions: [],//关联选项\r\n        upLoadData: {//上传文件时传递的参数\r\n          id: \"\"\r\n        },\r\n        action: api.url.easyDataCheck.uploadFile,//上传地址\r\n        pageSize: 10,\r\n        total: 100,\r\n        currentPage: 1,\r\n        look: false,\r\n        fileList: [],//上传文件参数\r\n        checkTableData: [],\r\n        gridData: [],\r\n        multipleSelection: []\r\n      }\r\n    },\r\n    created() {\r\n      this.$parent.setSelectDisable(true);\r\n      this.$parent.setProjectInfo();\r\n      this.initSourceData();\r\n      this.$nextTick(function () {\r\n        this.getWorkerInfo();\r\n      });\r\n    }\r\n    ,\r\n    methods: {\r\n      //初始化数据源\r\n      initSourceData() {\r\n        api.post(api.url.easyDataCheck.initSourceData, {\r\n          pmId: this.$parent.getProjectId(),\r\n          operator: this.$parent.getUserId(),\r\n          dataType: 3\r\n        }).then((data) => {\r\n          console.log(data.msg);\r\n        });\r\n      },\r\n      //加载数据\r\n      getWorkerInfo: function () {\r\n        let pageSize = this.pageSize;\r\n        let currentPage = this.currentPage;\r\n        let first = (currentPage - 1) * pageSize;\r\n        //获取项目id\r\n        this.pmId = this.$parent.getProjectId();\r\n        //获取operator\r\n        let operator = this.$parent.getUserId();\r\n        console.log(\"projectId:\" + this.pmId);\r\n        api.post(api.url.easyDataCheck.initData, {\r\n          'first': first,\r\n          'count': pageSize,\r\n          pmId: this.pmId,\r\n          operator: operator\r\n        }).then((data) => {\r\n          console.log(data);\r\n          this.checkTableData = data.rows;\r\n          this.total = data.total;\r\n          this.process = data.process;\r\n          if (this.process.isEasyDataCheck == null || this.process.isEasyDataCheck != 1) {\r\n            this.isActive = false;\r\n          } else if (this.process.isEasyDataCheck == 1) {\r\n            this.isActive = true;\r\n          }\r\n        });\r\n      }\r\n      ,\r\n      handleSizeChange(val) {\r\n        console.log(`每页 ${val} 条`);\r\n        this.pageSize = val;\r\n        this.getWorkerInfo();\r\n      }\r\n      ,\r\n      handleCurrentChange(val) {\r\n        console.log(`当前页: ${val}`);\r\n        this.currentPage = val;\r\n        this.getWorkerInfo();\r\n      }\r\n      ,//根据id获取数据信息\r\n      getDetail: function (data) {\r\n        this.look = true;\r\n        this.workId = data;\r\n        api.post(api.url.easyDataCheck.detail, {sourceId: data}).then((data) => {\r\n          this.gridData = data.data;\r\n        });\r\n      },\r\n      //上传数据\r\n      doUpload(id) {\r\n        this.upLoadData.id = id;\r\n        this.uploadWindow = true;\r\n      }\r\n      ,\r\n      beforeUpload(file) {\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function () {\r\n          // this.upLoadData.id = this.result;\r\n          // console.log(this.action);\r\n          // console.log(this.result);\r\n        };\r\n      }\r\n      ,\r\n      handlePreview(file) {\r\n        console.log(file);\r\n      }\r\n      ,\r\n      handleRemove(file, fileList) {\r\n        console.log(file, fileList);\r\n      }\r\n      ,\r\n      uploadSeccess: function (response) {\r\n        console.log(response);\r\n        if (response.status == 'success') {\r\n          this.fileList = [];\r\n          this.uploadWindow = false;\r\n          this.getWorkerInfo();\r\n        } else {\r\n          this.$message.warning(response.msg);\r\n        }\r\n      }\r\n      ,\r\n      beforeRemove(file, fileList) {\r\n        return this.$confirm(`确定移除 ${ file.name }？`);\r\n      }\r\n      ,\r\n      handleExceed(files, fileList) {\r\n        this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n      }\r\n      ,\r\n      //导出sql文件\r\n      exportSql: function (data) {\r\n        window.open(api.url.easyDataCheck.exportSql + \"?id=\" + data);\r\n      },\r\n      //级联选择器\r\n      handleChange(isUse) {\r\n        console.log(isUse);\r\n        alert(this.selectedOptions);\r\n        if (isUse == 1) {\r\n          //维护,更新isUse字段\r\n        }\r\n      },\r\n      //表格复选框\r\n      handleSelectionChange(val) {\r\n        this.multipleSelection = val;\r\n        console.info(this.multipleSelection);\r\n      },\r\n      //导出excel数据\r\n      downloadExcel: function () {\r\n        window.open(api.url.easyDataCheck.exportModel);\r\n      },\r\n      //批量导出\r\n      batchExport() {\r\n        let checkArr = this.multipleSelection;\r\n        if (checkArr.length == 0) {\r\n          return;\r\n        }\r\n        let idsStr = \"\";\r\n        for (let i = 0; i < checkArr.length; i++) {\r\n          if (idsStr == \"\") {\r\n            idsStr = checkArr[i].id;\r\n          } else {\r\n            idsStr = idsStr + \",\" + checkArr[i].id;\r\n          }\r\n        }\r\n        window.open(api.url.easyDataCheck.batchExport + \"?idsStr=\" + idsStr);\r\n      },\r\n      //选择范围\r\n      doRangeSelect(range, id) {\r\n        console.info(\"noScopeCode:\" + range);\r\n        console.info(\"id:\" + id);\r\n        //改变范围\r\n        api.post(api.url.easyDataCheck.changeScope, {\r\n          'noScopeCode': range,\r\n          'id': id,\r\n          'operator': this.$parent.getUserId(),\r\n        }).then((data) => {\r\n          console.log(data.msg);\r\n        });\r\n      },\r\n      //确认完成\r\n      doConfirm: function () {\r\n        let pmId = this.$parent.getProjectId();\r\n        let confirmText = '';\r\n        let succMessage = '';\r\n        let calMessage = '';\r\n        let isEasyDataCheck = 0;\r\n        if (!this.isActive) {\r\n          confirmText = '此操作将确认基础数据校验, 是否继续?';\r\n          succMessage = '确认成功';\r\n          calMessage = '已取消确认';\r\n          isEasyDataCheck = 1;\r\n        } else {\r\n          confirmText = '此操作将取消确认基础数据校验, 是否继续?';\r\n          succMessage = '取消成功';\r\n          calMessage = '已撤销取消';\r\n          isEasyDataCheck = 0;\r\n        }\r\n        this.$confirm(confirmText, '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          api.post(api.url.easyDataCheck.confirm, {\r\n            pmId: pmId,\r\n            operator: this.$parent.getUserId(),\r\n            isEasyDataCheck: isEasyDataCheck,\r\n          }).then((data) => {\r\n            if (data.status == \"success\") {\r\n              this.$message({type: 'success', message: succMessage});\r\n              if (!this.isActive) {\r\n                this.isActive = true;\r\n              } else {\r\n                this.isActive = false;\r\n              }\r\n            }\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: calMessage\r\n          });\r\n        });\r\n      },\r\n    }\r\n  }\r\n</script>\r\n<!--CSS-PAGE-->\r\n<style lang=\"stylus\" scoped>\r\n  .easy-data-check {\r\n    padding 15px\r\n  }\r\n\r\n  .easy-data-check span.noraml {\r\n    color #2fdd2f;\r\n  }\r\n\r\n  .easy-data-check span.dangerous {\r\n    color #ff6464;\r\n  }\r\n\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/implement-work/easy-data-check.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"easy-data-check\"},[_c('div',{staticClass:\"w-table\"},[_c('div',{staticClass:\"w-table-btn\"},[_c('span',{class:{active:_vm.isActive},on:{\"click\":_vm.doConfirm}},[_c('i',{staticClass:\"iconfont icon-conf-complete\"}),_vm._v(\"确认完成\")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.batchExport}},[_c('i',{staticClass:\"iconfont icon-export\"}),_vm._v(\"导出\")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.downloadExcel}},[_c('i',{staticClass:\"iconfont  el-icon-download\"}),_vm._v(\"导出模板\")])]),_vm._v(\" \"),_c('div',{staticClass:\"w-table-content\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.checkTableData},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"map.type\",\"label\":\"分类\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"isUse\",\"label\":\"是否维护\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"请选择\"},on:{\"change\":function($event){_vm.doRangeSelect(scope.row.noScopeCode,scope.row.id)}},model:{value:(scope.row.noScopeCode),callback:function ($$v) {_vm.$set(scope.row, \"noScopeCode\", $$v)},expression:\"scope.row.noScopeCode\"}},_vm._l((_vm.ranges),function(group){return _c('el-option-group',{key:group.label,attrs:{\"label\":group.label}},_vm._l((group.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))}))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"content\",\"label\":\"完成情况\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{class:scope.row.map.state ? 'dangerous':'noraml'},[_vm._v(_vm._s(scope.row.content))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operate\"},[_c('i',{staticClass:\"iconfont icon-export\",on:{\"click\":function($event){_vm.exportSql(scope.row.id)}}}),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-conf-complete\",on:{\"click\":function($event){_vm.doUpload(scope.row.id)}}}),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-look-over\",on:{\"click\":function($event){_vm.getDetail(scope.row.id)}}})])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"w-table-page\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"未达标的科室或医生如下表\",\"width\":\"60%\",\"visible\":_vm.look},on:{\"update:visible\":function($event){_vm.look=$event}}},[_c('el-table',{attrs:{\"data\":_vm.gridData,\"height\":\"300\"}},[_c('el-table-column',{attrs:{\"property\":\"deptDoctorCode\",\"show-overflow-tooltip\":\"true\",\"label\":\"科室或医生代码\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"deptDoctorName\",\"show-overflow-tooltip\":\"true\",\"label\":\"科室或医生名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"property\":\"num\",\"show-overflow-tooltip\":\"true\",\"label\":\"数量\"}})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"文件上传\",\"width\":\"30%\",\"visible\":_vm.uploadWindow},on:{\"update:visible\":function($event){_vm.uploadWindow=$event}}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.action,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.uploadSeccess,\"before-remove\":_vm.beforeRemove,\"before-upload\":_vm.beforeUpload,\"data\":_vm.upLoadData,\"multiple\":\"\",\"limit\":1,\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls/xlsx文件，且不超过500kb\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.uploadWindow = false}}},[_vm._v(\"取 消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-6dad9ade\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/implement-work/easy-data-check.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6dad9ade\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./easy-data-check.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./easy-data-check.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./easy-data-check.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6dad9ade\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./easy-data-check.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6dad9ade\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/implement-work/easy-data-check.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}